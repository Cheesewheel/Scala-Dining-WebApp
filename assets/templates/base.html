{% extends 'base_no_navbar.html' %}
{% load credit_tags %}

{# todo: https://fontawesome.com/how-to-use/on-the-web/styling/fixed-width-icons #}

{% block body %}
<!-- Navbar -->
<div class="row m-0 header-main mb-3">
    <div class="col-12 row width-max-lg">
        <div class="header-title row">
            <div class="header-image"></div>
            <div class="show-sm">
                Scala Dining
            </div>
            <a href="{% url 'index' %}" class="header-title-link"></a>
        </div>
        <div class="header-personal row m-0">
            <div class="header-personal-text">
                {{ user }}<br>
                {{ user.usercredit.get_current_credits|euro }}
            </div>
            <div class="header-personal-image"></div>
            <label for="header-dropdown" class="header-title-link"></label>
            <input type="checkbox" id="header-dropdown">
            <div class="header-dropdown">
                <hr>
                <a class="header-dropdown-line" href="{% url 'history_lists' %}">
                    <span href="#" class="header-dropdown-line-content">History</span><i class="fas fa-history"></i>
                </a>
                <a class="header-dropdown-line" href="{% url 'history_credits' %}">
                    <span href="#" class="header-dropdown-line-content">Credits</span><i class="fas fa-euro-sign"></i>
                </a>
                <a class="header-dropdown-line" href="{% url 'settings' %}">
                    <span href="#" class="header-dropdown-line-content">Settings</span><i class="fas fa-cog"></i>
                </a>
                {% if request.user.can_access_back %}
                    <a class="header-dropdown-line" href="{% url 'admin:index' %}" target="_blank">
                        <span href="#" class="header-dropdown-line-content">Control Panel</span><i class="fas fa-toolbox"></i>
                    </a>
                {% endif %}
                {% if request.user.groups.all.count > 0 %}
                    <hr>
                    {% for group in request.user.groups.all %}
                        <a class="header-dropdown-line" href="{% url 'association_credits' association_name=group.associationdetails.shorthand %}">
                            <span href="#" class="header-dropdown-line-content" style="background-image: url({{ group.associationdetails.image.url }})">
                                {{ group.associationdetails.shorthand }}</span>
                        </a>
                    {% endfor %}
                {% endif %}
                <hr>
                <a class="header-dropdown-line mb-4" href="{% url 'logout' %}">
                    <span class="header-dropdown-line-content">Log out</span><i class="fas fa-power-off"></i>
                </a>

            </div>
        </div>
    </div>
    {% if messages %}
        <div class="col-12 header-msg py-1">
            {% for message in messages %}
                <div {% if message.tags %} class="{{ message.tags }}"{% endif %}
                        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %} msg-warning {% endif %}>
                    <div class="width-max-lg">
                        {% if message.level < DEFAULT_MESSAGE_LEVELS.WARNING %}
                            &bull;
                        {% else %}
                            <span class="bold text-size-4">!</span>
                        {% endif %}
                        {{ message }}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>

<div class="container">
    <div class="row width-max-lg text-size-md-5">
        <div class="col-12">
            <!-- Content -->
            {% block content %}{% endblock %}
        </div>
    </div>
</div>

<!-- Debug info -->
{#<script>#}
{#    var sql_queries = {{ sql_queries|safe }};#}
{#    console.log(sql_queries);#}
{#</script>#}
{% endblock %}