{% load staticfiles %}
{% load form_extras %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"-->
    <link rel="stylesheet" href="{% static 'css/base_sizes.css' %}">
    <link rel="stylesheet" href="{% static 'css/base-colors.css' %}">
    <link rel="stylesheet" href="{% static 'css/dining.css' %}">
    <link rel="stylesheet" href="{% static 'css/header.css' %}">

    <title>{% block title %}Scala Dining {% endblock %}</title>
</head>
<body>

<div class="row m-0 header-main mb-3">
    <div class="col-12 row width-max-lg">
        <div class="header-title row">
            <div class="header-image"></div>
            <div class="show-sm">
                Scala Dining
            </div>
            <a href="{% url 'index' %}" class="header-title-link"></a>
        </div>
        <div class="header-personal row m-0">
            <div class="header-personal-text">
                {{ request.user }}<br>
                {% with request.user.usercredit.get_current_credits as credit %}
                    {% if credit < 0 %}
                        -&euro;{{ credit|multiply:-1 }}
                    {% else %}
                        &euro;{{ credit }}
                    {% endif %}
                {% endwith %}
            </div>
            <div class="header-personal-image"></div>
            <label for="header-dropdown" class="header-title-link"></label>
            <input type="checkbox" id="header-dropdown">
            <div class="header-dropdown">
                <hr>
                <a class="header-dropdown-line" href="{% url 'history_lists' %}">
                    <span href="#" class="header-dropdown-line-content" style="background-image: url(/static/images/History.png);">History</span>
                </a>
                <a class="header-dropdown-line" href="{% url 'history_credits' %}">
                    <span href="#" class="header-dropdown-line-content" style="background-image: url(/static/images/euro.png);">Credits</span>
                </a>
                <a class="header-dropdown-line" href="{% url 'settings' %}">
                    <span href="#" class="header-dropdown-line-content" style="background-image: url(/static/images/gear.png);">Settings</span>
                </a>
                {% if request.user.can_access_back %}
                    <a class="header-dropdown-line" href="{% url 'admin:index' %}" target="_blank">
                        <span href="#" class="header-dropdown-line-content">Control Panel</span>
                    </a>
                {% endif %}
                {% if request.user.groups.all.count > 0 %}
                    <hr>
                    {% for group in request.user.groups.all %}
                        <a class="header-dropdown-line" href="{% url 'association_credits' association_name=group.associationdetails.shorthand %}">
                            <span href="#" class="header-dropdown-line-content" style="background-image: url({{ group.associationdetails.image.url }})">
                                {{ group.associationdetails.shorthand }}</span>
                        </a>
                    {% endfor %}
                {% endif %}
                <hr>
                <a class="header-dropdown-line mb-4" href="{% url 'logout' %}">
                    <span class="header-dropdown-line-content" style="background-image: url(/static/images/logout.png);">Log out</span>
                </a>

            </div>
        </div>
    </div>
    {% if messages %}
        <div class="col-12 header-msg py-1">
            {% for message in messages %}
                <div {% if message.tags %} class="{{ message.tags }}"{% endif %}
                        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %} msg-warning {% endif %}>
                    <div class="width-max-lg">
                        {% if message.level < DEFAULT_MESSAGE_LEVELS.WARNING %}
                            &bull;
                        {% else %}
                            <span class="bold text-size-4">!</span>
                        {% endif %}
                        {{ message }}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>



{% block header %}

{% endblock header %}


<div class="container">
    <div class="row width-max-lg text-size-md-5">
        <div class="col-12">
            <!-- Content -->
            {% block content %}
                EMPTY
            {% endblock %}
        </div>
    </div>
</div>

<!-- Debug info -->
<script>
    var sql_queries = {{ sql_queries|safe }};
    console.log(sql_queries);
</script>

</body>
</html>